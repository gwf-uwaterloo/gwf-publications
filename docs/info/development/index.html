<!doctype html><html lang=en-us><head><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&display=swap" rel=stylesheet><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js></script><script>window.onload=function(){document.getElementById('expand-proj').addEventListener('click',function(){if(this.textContent=='show less...'){this.textContent='show all...';}else{this.textContent='show less...';}});document.getElementById('expand-uni').addEventListener('click',function(){if(this.textContent=='show less...'){this.textContent='show all...';}else{this.textContent='show less...';}});};</script><script>var unis={};$(document).on("change","input[type='checkbox']",function(){if(this.id.startsWith("check_year")){var any_checked=$(':input[id^="check_year"]').map(function(){return $(this).prop('checked');}).get().includes(true);const collection=document.getElementById("main").children;if($("#year_list li:first-child").css("display")=='none'){$("#year_list li:first-child").prop('style',"display:initial !important");$('div[id^="year_"]').prop('style','display:none !important');}
if(any_checked){for(child of collection)
{if(child.id.startsWith(this.id.slice(-9)))
{this.checked?child.style.display="initial":child.style.display="none";}}}else{$("#year_list li:first-child").prop('style',"display:none !important")
for(child of collection)
{child.style.display="initial";}}}else if(this.id.startsWith("uni")){console.log("Hi2")
var any_checked=$(':input[id^="uni"]').map(function(){return $(this).prop('checked');}).get().includes(true);var uni=this.id.slice(-7);if(unis[uni]==undefined)unis[uni]=true;this.checked?(unis[uni]=true):(unis[uni]=false);if($("#university_list li:first-child").css("display")=='none'){$("#university_list li:first-child").prop('style',"display:initial !important");$('div[data-prj^="prj"]').each(function(){$(this).children().first().prop("style","display:none !important");});}
if(any_checked){const collection=document.querySelectorAll("[data-uni="+uni+"]");for(child of collection){if(this.checked){child.parentNode.parentNode.setAttribute("style","display:flex !important")}else{disp_off_flag=true;for(child of child.parentNode.querySelectorAll("[data-uni]")){if(unis[child.getAttribute("data-uni")]==undefined)unis[child.getAttribute("data-uni")]=true;if(unis[child.getAttribute("data-uni")]==true){disp_off_flag=false;break;}}
if(disp_off_flag){child.parentNode.parentNode.setAttribute("style","display:none !important");}}}}else{$("#university_list li:first-child").prop('style',"display:none !important");$('div[data-prj^="prj"]').each(function(){$(this).children().first().prop("style","display:flex !important");});}}
else if(this.id.startsWith("prj")){var any_checked=$(':input[id^="prj"]').map(function(){return $(this).prop('checked');}).get().includes(true);var prj=this.id.slice(-4);if($("#project_list li:first-child").css("display")=='none'){$("#project_list li:first-child").prop('style',"display:initial !important");$('div[data-prj^="prj"]').each(function(){$(this).prop("style","display:none !important");});}
if(any_checked){const collection=document.querySelectorAll("[data-prj="+prj+"]");for(child of collection){(this.checked)?child.setAttribute("style","display:initial !important"):child.setAttribute("style","display:none !important")}}else{console.log("all unckecked")
$("#project_list li:first-child").prop('style',"display:none !important");$('div[data-prj^="prj"]').each(function(){$(this).prop("style","display:initial !important");});}}});function clearAll(t){if(t=='year'){$(':input[id^="check_year"]').prop('checked',false);$('div[id^="year_"]').prop('style','display:initial;');$("#year_list li:first-child").prop('style',"display:none !important")}else if(t=='uni'){$(':input[id^="uni"]').prop('checked',false);$('div[data-prj^="prj"]').each(function(){$(this).children().first().prop("style","display:flex !important");});$("#university_list li:first-child").prop('style',"display:none !important")}else if(t=='prj'){$(':input[id^="prj"]').prop('checked',false);$('div[data-prj^="prj"]').each(function(){$(this).prop("style","display:initial !important");});$("#project_list li:first-child").prop('style',"display:none !important")}}</script><style>.arrowup{border:solid #fff;border-width:0 3px 3px 0;display:inline-block;padding:5px;transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}#topBtn{display:none;position:fixed;bottom:20px;right:30px;z-index:99;font-size:30px;border:none;outline:none;background-color:#29abe0;color:#fff;cursor:pointer;padding:15px;border-radius:8px;height:10dp}#topBtn:hover{background-color:#1b8dbb}.card-header-custom{cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.clear-widget{color:#747474!important;background-color:#dee2e6;font-size:80%!important}.clear-widget:hover{color:#212529!important;background-color:#c1c9d0;cursor:pointer}</style><!--[if IEMobile]><meta http-equiv=cleartype content="on"><![endif]--><title>Anthology development and API - GWF Publications</title><meta name=generator content="Hugo 0.68.3"><link href=/gwf-publications/gwficon.ico rel="shortcut icon" type=image/x-icon><link rel=stylesheet href=/gwf-publications/css/main.min.8976777c0832d068a49d330764e507857027f1efa3b8501cf349b0e2db7410fc.css media=screen><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/all.css integrity=sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr crossorigin=anonymous><link rel=stylesheet href=/gwf-publications/css/academicons.min.css></head><body><header style="z-index:1002;top:0;position:sticky;display:block;box-sizing:border-box;font-family:open sans,helvetica neue,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;color:#222;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:100%"><div id=navbar-container style=display:block;overflow:hidden;z-index:10;left:0;margin:0;line-height:2em;white-space:normal;background-color:#000;color:#dfdfdf;height:57px;right:0;top:0><a href=/gwf-publications/ style=outline:none;position:absolute;top:50%;left:50%;max-width:45%;transform:translate(-50%,-50%)><img alt src=/gwf-publications/images/waterloo-logo.svg style="display:flex;flex-shrink:0;transition:opacity 300ms linear 0s;cursor:pointer;width:139.273px;max-width:100%;vertical-align:middle"></a></div></header><div id=main-container class=container><main aria-role=main><h2 id=title>Anthology development and API</h2><p class="lead text-muted">Information on how to programmatically access Anthology data</p><hr><p class="font-weight-light font-italic text-muted">November 15, 2019</p><h3 id=api>API</h3><p>All Anthology data is stored under <a href=https://github.com/acl-org/acl-anthology/tree/master/data>the data directory</a>.
In the <code>xml</code> directory are the files that contain all the Anthology metadata, in a format described below.
The <code>yaml</code> directory contains various other important information.</p><p>In addition, we have a Python API that defines objects for papers, authors, volumes, and so on.
This is all accessible by an <code>Anthology</code> object that can be access in the following manner.
First, clone <a href=https://github.com/acl-org/acl-anthology>the Anthology Github repo</a> and setup your environment:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone https://github.com/acl-org/acl-anthology
export ACLANTHOLOGY<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span>/acl-anthology
export PYTHONPATH<span style=color:#f92672>+=</span>:$ACLANTHOLOGY/bin
</code></pre></div><p>You can now access the Anthology from Python:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>from</span> anthology <span style=color:#f92672>import</span> Anthology

anthology <span style=color:#f92672>=</span> Anthology(importdir<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;acl-anthology/data&#39;</span>)
<span style=color:#66d9ef>for</span> id_, paper <span style=color:#f92672>in</span> anthology<span style=color:#f92672>.</span>papers<span style=color:#f92672>.</span>items():
  <span style=color:#66d9ef>print</span>(paper<span style=color:#f92672>.</span>anthology_id, paper<span style=color:#f92672>.</span>get_title(<span style=color:#e6db74>&#39;text&#39;</span>)
</code></pre></div><p>See the script <a href=https://github.com/acl-org/acl-anthology/blob/master/bin/create_hugo_yaml.py>create_hugo_yaml.py</a> to see how to iterate over the Anthology object and access other information such as authors and volumes.</p><h3 id=authoritative-xml-format>Authoritative XML format</h3><p>The Anthology site is generated from an authoritative XML file format containing information about volumes, paper titles, and authors.
This data is stored in <a href=https://github.com/acl-org/acl-anthology/tree/master/data/xml>the official repository on Github</a>.
Here is a fragment of a complete XML file (<a href=https://github.com/acl-org/acl-anthology/blob/master/data/xml/P18.xml>P18.xml</a>), to give you the idea.
The full file contains much more information.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span style=color:#f92672>&lt;collection</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;P18&#34;</span><span style=color:#f92672>&gt;</span>
  <span style=color:#f92672>&lt;volume</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;3&#34;</span><span style=color:#f92672>&gt;</span>
    <span style=color:#f92672>&lt;meta&gt;</span>
      <span style=color:#f92672>&lt;booktitle&gt;</span>Proceedings of <span style=color:#f92672>&lt;fixed-case&gt;</span>ACL<span style=color:#f92672>&lt;/fixed-case&gt;</span> 2018, Student Research Workshop<span style=color:#f92672>&lt;/booktitle&gt;</span>
      <span style=color:#f92672>&lt;editor&gt;&lt;first&gt;</span>Vered<span style=color:#f92672>&lt;/first&gt;&lt;last&gt;</span>Shwartz<span style=color:#f92672>&lt;/last&gt;&lt;/editor&gt;</span>
      <span style=color:#f92672>&lt;url&gt;</span>P18-3<span style=color:#f92672>&lt;/url&gt;</span>
    <span style=color:#f92672>&lt;/meta&gt;</span>
    <span style=color:#f92672>&lt;frontmatter&gt;</span>
      <span style=color:#f92672>&lt;url&gt;</span>P18-3000<span style=color:#f92672>&lt;/url&gt;</span>
      <span style=color:#75715e>&lt;!-- ... --&gt;</span>
    <span style=color:#f92672>&lt;/frontmatter&gt;</span>
    <span style=color:#f92672>&lt;paper</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>&gt;</span>
      <span style=color:#f92672>&lt;title&gt;</span>Towards Opinion Summarization of Customer Reviews<span style=color:#f92672>&lt;/title&gt;</span>
      <span style=color:#f92672>&lt;author&gt;&lt;first&gt;</span>Samuel<span style=color:#f92672>&lt;/first&gt;&lt;last&gt;</span>Pecar<span style=color:#f92672>&lt;/last&gt;&lt;/author&gt;</span>
      <span style=color:#f92672>&lt;url&gt;</span>P18-3001<span style=color:#f92672>&lt;/url&gt;</span>
      <span style=color:#75715e>&lt;!-- ... --&gt;</span>
    <span style=color:#f92672>&lt;/paper&gt;</span>
    <span style=color:#f92672>&lt;paper</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;2&#34;</span><span style=color:#f92672>&gt;</span>
      <span style=color:#f92672>&lt;title&gt;</span>Sampling Informative Training Data for <span style=color:#f92672>&lt;fixed-case&gt;</span>RNN<span style=color:#f92672>&lt;/fixed-case&gt;</span> Language Models<span style=color:#f92672>&lt;/title&gt;</span>
      <span style=color:#f92672>&lt;author&gt;&lt;first&gt;</span>Jared<span style=color:#f92672>&lt;/first&gt;&lt;last&gt;</span>Fernandez<span style=color:#f92672>&lt;/last&gt;&lt;/author&gt;</span>
      <span style=color:#f92672>&lt;author&gt;&lt;first&gt;</span>Doug<span style=color:#f92672>&lt;/first&gt;&lt;last&gt;</span>Downey<span style=color:#f92672>&lt;/last&gt;&lt;/author&gt;</span>
      <span style=color:#f92672>&lt;url&gt;</span>P18-3002<span style=color:#f92672>&lt;/url&gt;</span>
      <span style=color:#75715e>&lt;!-- ... --&gt;</span>
    <span style=color:#f92672>&lt;/paper&gt;</span>
    <span style=color:#f92672>&lt;paper</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;3&#34;</span><span style=color:#f92672>&gt;</span>
      <span style=color:#f92672>&lt;title&gt;</span>Learning-based Composite Metrics for Improved Caption Evaluation<span style=color:#f92672>&lt;/title&gt;</span>
      <span style=color:#f92672>&lt;author&gt;&lt;first&gt;</span>Naeha<span style=color:#f92672>&lt;/first&gt;&lt;last&gt;</span>Sharif<span style=color:#f92672>&lt;/last&gt;&lt;/author&gt;</span>
      <span style=color:#f92672>&lt;author&gt;&lt;first&gt;</span>Lyndon<span style=color:#f92672>&lt;/first&gt;&lt;last&gt;</span>White<span style=color:#f92672>&lt;/last&gt;&lt;/author&gt;</span>
      <span style=color:#f92672>&lt;author&gt;&lt;first&gt;</span>Mohammed<span style=color:#f92672>&lt;/first&gt;&lt;last&gt;</span>Bennamoun<span style=color:#f92672>&lt;/last&gt;&lt;/author&gt;</span>
      <span style=color:#f92672>&lt;author&gt;&lt;first&gt;</span>Syed Afaq<span style=color:#f92672>&lt;/first&gt;&lt;last&gt;</span>Ali Shah<span style=color:#f92672>&lt;/last&gt;&lt;/author&gt;</span>
      <span style=color:#f92672>&lt;url&gt;</span>P18-3003<span style=color:#f92672>&lt;/url&gt;</span>
      <span style=color:#75715e>&lt;!-- ... --&gt;</span>
    <span style=color:#f92672>&lt;/paper&gt;</span>
    <span style=color:#75715e>&lt;!-- ...  --&gt;</span>
  <span style=color:#f92672>&lt;/volume&gt;</span>
<span style=color:#f92672>&lt;/collection&gt;</span>
</code></pre></div><p>Our scripts use the <a href=http://lxml.de>lxml.de</a> library to parse the XML.
You can see examples of parsing and accessing the XML directly in <a href=https://github.com/acl-org/acl-anthology/blob/master/bin/add_revision.py>add_revision.py</a> and <a href=https://github.com/acl-org/acl-anthology/blob/master/bin/ingest.py>ingest.py</a>.</p></main></div><footer class="bg-gradient-light py-2 py-xl-3 mt-3 mt-md-4 mt-xl-5"><div class=container><p class="text-muted small px-1">Global Water Futures Publications!</p></div></footer><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js integrity=sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js integrity=sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k crossorigin=anonymous></script><script>$(function(){$('[data-toggle="tooltip"]').tooltip();if($("#toggle-all-abstracts")){$("#toggle-all-abstracts").click(function(){var target=$("#toggle-all-abstracts");target.attr("disabled",true);if(target.attr("data-toggle-state")=="hide"){$(".abstract-collapse").collapse('show');target.attr("data-toggle-state","show");}else{$(".abstract-collapse").collapse('hide');target.attr("data-toggle-state","hide");}
target.attr("disabled",false);});$("#toggle-all-abstracts").attr("disabled",false);}})</script></body></html>